# Webots Human Tracking - Quick Start

–û—Ç—Å–ª–µ–¥–∏—Ç—å —á–µ–ª–æ–≤–µ–∫–∞ –¥—Ä–æ–Ω–æ–º –≤ Webots –∑–∞ 3 —à–∞–≥–∞! üöÅüë§

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ó–∞–ø—É—Å—Ç–∏—Ç—å Webots

```bash
webots iris_camera_human.wbt
```

### 2. –ó–∞–ø—É—Å—Ç–∏—Ç—å ArduPilot SITL

```bash
# –ü—É—Ç—å –∫ –≤–∞—à–µ–º—É ArduPilot
cd ~/ardupilot
sim_vehicle.py -v ArduCopter -f webots-quad --console
```

### 3. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç—Ä–µ–∫–µ—Ä

```bash
python webots_human_tracker.py --model runs/best_model
```

–ì–æ—Ç–æ–≤–æ! –î—Ä–æ–Ω –≤–∑–ª–µ—Ç–∏—Ç –∏ –Ω–∞—á–Ω—ë—Ç —Å–ª–µ–¥–∏—Ç—å –∑–∞ —á–µ–ª–æ–≤–µ–∫–æ–º ‚úÖ

## –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç

1. **Webots** —Å–∏–º—É–ª–∏—Ä—É–µ—Ç –¥—Ä–æ–Ω –∏ —á–µ–ª–æ–≤–µ–∫–∞
2. **ArduPilot SITL** —Å—Ç–∞–±–∏–ª–∏–∑–∏—Ä—É–µ—Ç –¥—Ä–æ–Ω
3. **–ù–µ–π—Ä–æ–Ω–∫–∞** (–æ–±—É—á–µ–Ω–Ω–∞—è –≤ MuJoCo!) —É–ø—Ä–∞–≤–ª—è–µ—Ç yaw –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è
4. **MAVLink** —Å–≤—è–∑—ã–≤–∞–µ—Ç –≤—Å—ë –≤–º–µ—Å—Ç–µ

## –ü–∞—Ä–∞–º–µ—Ç—Ä—ã

```bash
# –û—Ç—Å–ª–µ–¥–∏—Ç—å 10 –º–∏–Ω—É—Ç
python webots_human_tracker.py --model runs/best_model --duration 600

# –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ —É–¥–∞–ª—ë–Ω–Ω–æ–º—É SITL
python webots_human_tracker.py --model runs/best_model --connection tcp:192.168.1.100:5760

# –ë–µ–∑ Webots Supervisor API (fallback —Ä–µ–∂–∏–º)
python webots_human_tracker.py --model runs/best_model --no-supervisor
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
.
‚îú‚îÄ‚îÄ iris_camera_human.wbt          # –°—Ü–µ–Ω–∞ Webots (–¥—Ä–æ–Ω + —á–µ–ª–æ–≤–µ–∫)
‚îú‚îÄ‚îÄ webots_capture.py              # –ü—Ä–æ—Å–º–æ—Ç—Ä –∫–∞–º–µ—Ä—ã –¥—Ä–æ–Ω–∞
‚îú‚îÄ‚îÄ webots_human_tracker.py        # –û—Å–Ω–æ–≤–Ω–æ–π —Ç—Ä–µ–∫–µ—Ä
‚îú‚îÄ‚îÄ protos/                        # PROTO —Ñ–∞–π–ª—ã –∏–∑ ArduPilot
‚îÇ   ‚îú‚îÄ‚îÄ Iris.proto                # –ú–æ–¥–µ–ª—å –¥—Ä–æ–Ω–∞
‚îÇ   ‚îú‚îÄ‚îÄ ArucoMarker.proto         # –ú–∞—Ä–∫–µ—Ä—ã
‚îÇ   ‚îî‚îÄ‚îÄ meshes/                   # 3D –º–æ–¥–µ–ª–∏
‚îî‚îÄ‚îÄ docs/WEBOTS_HUMAN_TRACKING.md  # –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

## –ü—Ä–æ—Å–º–æ—Ç—Ä –∫–∞–º–µ—Ä—ã (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

```bash
# –û—Ç–¥–µ–ª—å–Ω—ã–π —Ç–µ—Ä–º–∏–Ω–∞–ª –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∫–∞–º–µ—Ä—ã –¥—Ä–æ–Ω–∞
python webots_capture.py
```

–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–æ—Ç–æ–∫ 640x640 —Å –∫–∞–º–µ—Ä—ã –¥—Ä–æ–Ω–∞ (–ø–æ—Ä—Ç 5599).

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- **Webots** 2023a –∏–ª–∏ –Ω–æ–≤–µ–µ
- **ArduPilot** SITL
- **Python** 3.10+
- **pymavlink**, **opencv-python**, **numpy**

```bash
pip install pymavlink opencv-python numpy
```

## –¢—Ä–∞–µ–∫—Ç–æ—Ä–∏—è —á–µ–ª–æ–≤–µ–∫–∞

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é —á–µ–ª–æ–≤–µ–∫ —Ö–æ–¥–∏—Ç –ø–æ waypoints: `(20, 8) ‚Üí (27, 1)`

–ò–∑–º–µ–Ω–∏—Ç—å —Ç—Ä–∞–µ–∫—Ç–æ—Ä–∏—é –≤ `iris_camera_human.wbt`:

```
Pedestrian {
    controllerArgs [
        "--trajectory=10 5, 15 10, 20 15"  # –í–∞—à–∏ —Ç–æ—á–∫–∏
    ]
}
```

## Troubleshooting

### –ù–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ SITL

```
‚ùå Failed to connect to SITL
```

**–†–µ—à–µ–Ω–∏–µ**: –ó–∞–ø—É—Å—Ç–∏—Ç–µ Webots –ü–ï–†–ï–î –∑–∞–ø—É—Å–∫–æ–º SITL!

### –î—Ä–æ–Ω –Ω–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ**:
1. –ú–æ–¥–µ–ª—å –∑–∞–≥—Ä—É–∂–µ–Ω–∞: `ls runs/best_model/best_model.zip`
2. SITL —Ä–∞–±–æ—Ç–∞–µ—Ç: `ps aux | grep arducopter`
3. –ß–µ–ª–æ–≤–µ–∫ –≤ —Å—Ü–µ–Ω–µ: –ø—Ä–æ–≤–µ—Ä—å—Ç–µ Webots Scene Tree

### –î—Ä–æ–Ω –ø–∞–¥–∞–µ—Ç/–Ω–µ—Å—Ç–∞–±–∏–ª–µ–Ω

**–ü–æ–ø—Ä–æ–±—É–π—Ç–µ**:
```bash
# –ë–æ–ª–µ–µ –ø–ª–∞–≤–Ω–æ–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ
python webots_human_tracker.py --model runs/best_model
# –ó–∞—Ç–µ–º –≤ –∫–æ–¥–µ: max_yaw_rate=1.0 (–≤–º–µ—Å—Ç–æ 1.5)
```

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ

üìñ **–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: [docs/WEBOTS_HUMAN_TRACKING.md](docs/WEBOTS_HUMAN_TRACKING.md)

üìä **–û–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏**: [docs/TRAINING.md](docs/TRAINING.md)

üèóÔ∏è **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**: [ARCHITECTURE.md](ARCHITECTURE.md)

## –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

–û–∂–∏–¥–∞–µ–º–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:
- ‚úÖ **–¢–æ—á–Ω–æ—Å—Ç—å –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è**: 85-95%
- ‚úÖ **–°—Ä–µ–¥–Ω—è—è –æ—à–∏–±–∫–∞ yaw**: 3-8¬∞
- ‚úÖ **–ß–∞—Å—Ç–æ—Ç–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è**: 50 Hz
- ‚úÖ **–õ–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å**: < 20ms

---

**–í–æ–ø—Ä–æ—Å—ã?** –°–º–æ—Ç—Ä–∏—Ç–µ [docs/WEBOTS_HUMAN_TRACKING.md](docs/WEBOTS_HUMAN_TRACKING.md) –∏–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ issue!
