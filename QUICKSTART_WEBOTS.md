# üöÄ Quick Start: Webots Human Tracking

–ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã —Ç—Ä–µ–∫–∏–Ω–≥–∞ —á–µ–ª–æ–≤–µ–∫–∞ –¥—Ä–æ–Ω–æ–º –≤ Webots.

---

## –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- ‚úÖ Webots —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- ‚úÖ ArduPilot SITL —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω (`~/ardupilot`)
- ‚úÖ –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã (—É–∂–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ)
- ‚úÖ –û–±—É—á–µ–Ω–Ω–∞—è –º–æ–¥–µ–ª—å (`runs/best_model/`)

---

## –ó–∞–ø—É—Å–∫ –≤ 3 —à–∞–≥–∞

### –®–∞–≥ 1: –ó–∞–ø—É—Å—Ç–∏—Ç–µ Webots

```bash
cd /Users/mac/projects/NNPID
./run_webots.sh
```

–ò–ª–∏ –Ω–∞–ø—Ä—è–º—É—é:
```bash
webots iris_camera_human.wbt
```

**–î–æ–∂–¥–∏—Ç–µ—Å—å —Å–æ–æ–±—â–µ–Ω–∏—è:**
```
Listening for ardupilot SITL at 127.0.0.1:9002
```

---

### –®–∞–≥ 2: –ó–∞–ø—É—Å—Ç–∏—Ç–µ ArduPilot SITL

**–û—Ç–∫—Ä–æ–π—Ç–µ –ù–û–í–´–ô —Ç–µ—Ä–º–∏–Ω–∞–ª:**

```bash
cd /Users/mac/projects/NNPID
./run_sitl.sh
```

–ò–ª–∏ –Ω–∞–ø—Ä—è–º—É—é:
```bash
cd ~/ardupilot/ArduCopter
python3 ~/ardupilot/Tools/autotest/sim_vehicle.py -v ArduCopter -f JSON --console
```

**‚è±Ô∏è –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫:** –ö–æ–º–ø–∏–ª—è—Ü–∏—è –∑–∞–π–º–µ—Ç 1-2 –º–∏–Ω—É—Ç—ã.

**–î–æ–∂–¥–∏—Ç–µ—Å—å —Å–æ–æ–±—â–µ–Ω–∏–π:**
```
JSON control interface listening on 127.0.0.1:9002
Link 1: MAVLink on 127.0.0.1:5760
```

---

### –®–∞–≥ 3: –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç—Ä–µ–∫–µ—Ä

**–û—Ç–∫—Ä–æ–π—Ç–µ –¢–†–ï–¢–ò–ô —Ç–µ—Ä–º–∏–Ω–∞–ª:**

```bash
cd /Users/mac/projects/NNPID
python webots_human_tracker.py --model runs/best_model
```

**–í—ã —É–≤–∏–¥–∏—Ç–µ:**
```
‚úÖ Loaded trained yaw tracker model
üì° Connecting to SITL at tcp:127.0.0.1:5760...
üéØ Tracking human: pedestrian(1)
```

---

## üéÆ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

### –í SITL –∫–æ–Ω—Å–æ–ª–∏ (Terminal 2):

```bash
# –í–∑–ª–µ—Ç
mode guided
arm throttle
takeoff 2

# –ü–æ—Å–ª–µ –≤–∑–ª–µ—Ç–∞ –¥—Ä–æ–Ω –Ω–∞—á–Ω–µ—Ç —Å–ª–µ–¥–∏—Ç—å –∑–∞ —á–µ–ª–æ–≤–µ–∫–æ–º –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏!

# –ü–æ—Å–∞–¥–∫–∞
mode land

# –ê–≤–∞—Ä–∏–π–Ω–æ–µ –≤—ã–∫–ª—é—á–µ–Ω–∏–µ
disarm
```

### –ì–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏

- **Space** –≤ Webots - –ø–∞—É–∑–∞/–ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å
- **Ctrl+R** –≤ Webots - –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–∏–º—É–ª—è—Ü–∏—é
- **Ctrl+C** –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ —Ç—Ä–µ–∫–µ—Ä–∞ - –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å

---

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

–¢—Ä–µ–∫–µ—Ä –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏:

```
Step 120 | Human: (11.2, -0.3, 1.3) | Drone: (0.1, 1.4, 0.8)
  Target angle: 84.2¬∞ | Current yaw: 2.1¬∞ | Error: 82.1¬∞
  NN output: 0.85 | Yaw rate cmd: 1.70 rad/s
```

---

## üêõ Troubleshooting

### Webots: "Controller directory not found"
```bash
./setup_controllers.sh
```

### SITL: "command not found: sim_vehicle.py"
```bash
./run_sitl.sh  # –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–æ–ª–Ω—ã–π –ø—É—Ç—å
```

### –¢—Ä–µ–∫–µ—Ä: "Connection refused"
–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ SITL –∑–∞–ø—É—â–µ–Ω –∏ –≤—ã –≤–∏–¥–∏—Ç–µ:
```
Link 1: MAVLink on 127.0.0.1:5760
```

### –î—Ä–æ–Ω –Ω–µ –≤–∑–ª–µ—Ç–∞–µ—Ç
–í SITL –∫–æ–Ω—Å–æ–ª–∏:
```bash
mode guided
arm throttle force
takeoff 2
```

### –î—Ä–æ–Ω –Ω–µ —Å–ª–µ–¥–∏—Ç –∑–∞ —á–µ–ª–æ–≤–µ–∫–æ–º
1. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –¥—Ä–æ–Ω –≤ –≤–æ–∑–¥—É—Ö–µ (–≤—ã—Å–æ—Ç–∞ > 0.5–º)
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ —Ç—Ä–µ–∫–µ—Ä –ø–æ–¥–∫–ª—é—á–µ–Ω (–Ω–µ—Ç –æ—à–∏–±–æ–∫ –≤ Terminal 3)
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ —á–µ–ª–æ–≤–µ–∫ –≤–∏–¥–µ–Ω –≤ Webots

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞

```
Terminal 1: Webots —Å–∏–º—É–ª—è—Ç–æ—Ä
  ‚îî‚îÄ> physics ‚Üí SITL (–ø–æ—Ä—Ç 9002)

Terminal 2: ArduPilot SITL
  ‚îú‚îÄ> physics ‚Üê Webots (–ø–æ—Ä—Ç 9002)
  ‚îî‚îÄ> MAVLink ‚Üí —Ç—Ä–µ–∫–µ—Ä (–ø–æ—Ä—Ç 5760)

Terminal 3: –ù–∞—à yaw —Ç—Ä–µ–∫–µ—Ä
  ‚îú‚îÄ> position ‚Üê Webots Supervisor API
  ‚îú‚îÄ> observation ‚Üí Neural Network
  ‚îî‚îÄ> yaw_rate_cmd ‚Üí SITL MAVLink (–ø–æ—Ä—Ç 5760)
```

---

## üéØ –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç

1. **Webots** —Å–∏–º—É–ª–∏—Ä—É–µ—Ç —Ñ–∏–∑–∏–∫—É –¥—Ä–æ–Ω–∞ –∏ —á–µ–ª–æ–≤–µ–∫–∞
2. **SITL** –ø–æ–ª—É—á–∞–µ—Ç physics –æ—Ç Webots, —É–ø—Ä–∞–≤–ª—è–µ—Ç –∞–≤—Ç–æ–ø–∏–ª–æ—Ç–æ–º
3. **–ù–∞—à —Ç—Ä–µ–∫–µ—Ä**:
   - –ß–∏—Ç–∞–µ—Ç –ø–æ–∑–∏—Ü–∏—é —á–µ–ª–æ–≤–µ–∫–∞ –∏–∑ Webots
   - –í—ã—á–∏—Å–ª—è–µ—Ç —É–≥–æ–ª –¥–æ —Ü–µ–ª–∏
   - –§–æ—Ä–º–∏—Ä—É–µ—Ç observation –¥–ª—è –Ω–µ–π—Ä–æ—Å–µ—Ç–∏
   - –ü–æ–ª—É—á–∞–µ—Ç yaw rate command –æ—Ç –º–æ–¥–µ–ª–∏
   - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∫–æ–º–∞–Ω–¥—É –≤ SITL —á–µ—Ä–µ–∑ MAVLink

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –î—Ä–æ–Ω —Å–ª–µ–¥–∏—Ç yaw'–æ–º –∑–∞ –¥–≤–∏–∂—É—â–∏–º—Å—è —á–µ–ª–æ–≤–µ–∫–æ–º! üéâ

---

## üìö –ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [Webots Human Tracking](docs/WEBOTS_HUMAN_TRACKING.md) - –ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- [Webots Setup](WEBOTS_CONTROLLERS_SETUP.md) - –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤
- [Trained Model Usage](docs/TRAINED_MODEL_USAGE.md) - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–∏

---

## ‚úÖ Checklist –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º

- [ ] Webots —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
- [ ] ArduPilot —Å–∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω –≤ `~/ardupilot`
- [ ] –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω—ã (`./setup_controllers.sh`)
- [ ] –û–±—É—á–µ–Ω–Ω–∞—è –º–æ–¥–µ–ª—å —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ `runs/best_model/`
- [ ] 3 —Ç–µ—Ä–º–∏–Ω–∞–ª–∞ –≥–æ—Ç–æ–≤—ã

**–ì–æ—Ç–æ–≤—ã? –ù–∞—á–Ω–∏—Ç–µ —Å –®–∞–≥–∞ 1!** üöÄ
